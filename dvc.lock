schema: '2.0'
stages:
  preprocess:
    cmd: python src/data_preprocessing.py params.yaml
    deps:
    - path: data/raw/Telco-Customer-Churn.csv
      hash: md5
      md5: 0f9de68e012bd3aed5fa7cdc9fc421af
      size: 977501
    - path: src/data_preprocessing.py
      hash: md5
      md5: 025c26c4494131d42d3692425b7b4d7c
      size: 3019
    params:
      params.yaml:
        preprocess:
          test_size: 0.2
          random_state: 42
    outs:
    - path: data/processed
      hash: md5
      md5: 8aedc7e551e943cd41aa418ee6019a5c.dir
      size: 1174448
      nfiles: 4
  tune:
    cmd: python src/hyperparameter_tuning.py params.yaml
    deps:
    - path: data/processed
      hash: md5
      md5: 79120a2f7d49c433074ebe54418aef7d.dir
      size: 994697
      nfiles: 4
    - path: src/hyperparameter_tuning.py
      hash: md5
      md5: cb40700987dee0726d8d008366f704b4
      size: 1962
    params:
      params.yaml:
        tune:
          n_iter: 5
          cv: 5
          param_grid:
            n_estimators:
            - 50
            - 100
            max_depth:
            - 5
            - 10
            - 15
            min_samples_leaf:
            - 3
            - 5
            min_samples_split:
            - 8
            - 15
    outs:
    - path: best_params.json
      hash: md5
      md5: 9353296cfc2209cde18d4729f5ff0342
      size: 107
  train:
    cmd: python src/model_trainer.py params.yaml
    deps:
    - path: data/processed
      hash: md5
      md5: 8aedc7e551e943cd41aa418ee6019a5c.dir
      size: 1174448
      nfiles: 4
    - path: src/model_trainer.py
      hash: md5
      md5: 539fc29f2642071564787af106536b9a
      size: 2039
    params:
      params.yaml:
        train:
          n_estimators: 100
          max_depth:
          min_samples_leaf: 2
          min_samples_split: 5
    outs:
    - path: models/model_columns.json
      hash: md5
      md5: f7550eacc6bcf0ed6e530e94a149a20f
      size: 880
    - path: models/random_forest_model.pkl
      hash: md5
      md5: a45268f139d8c838da7eebcdf86b5de4
      size: 10296361
  evaluate:
    cmd: python src/model_evaluation.py params.yaml
    deps:
    - path: data/processed
      hash: md5
      md5: 8aedc7e551e943cd41aa418ee6019a5c.dir
      size: 1174448
      nfiles: 4
    - path: models/random_forest_model.pkl
      hash: md5
      md5: a45268f139d8c838da7eebcdf86b5de4
      size: 10296361
    - path: src/model_evaluation.py
      hash: md5
      md5: 64be7c20244a29b39e70cf90166f3b8a
      size: 2511
    params:
      params.yaml:
        preprocess:
          test_size: 0.2
          random_state: 42
        train:
          n_estimators: 100
          max_depth:
          min_samples_leaf: 2
          min_samples_split: 5
    outs:
    - path: metrics.json
      hash: md5
      md5: 315fbf46ff2f2d4949b5f89e98484d92
      size: 145
