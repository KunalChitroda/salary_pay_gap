schema: '2.0'
stages:
  preprocess:
    cmd: python src/data_preprocessing.py params.yaml
    deps:
    - path: data/raw/Telco-Customer-Churn.csv
      hash: md5
      md5: 0f9de68e012bd3aed5fa7cdc9fc421af
      size: 977501
    - path: src/data_preprocessing.py
      hash: md5
      md5: fab1a99213d914816764895fdf010c39
      size: 3093
    params:
      params.yaml:
        preprocess:
          test_size: 0.2
          random_state: 42
    outs:
    - path: data/processed
      hash: md5
      md5: 41616036666694c6fe956d58c2200ec9.dir
      size: 1188516
      nfiles: 4
  tune:
    cmd: python src/hyperparameter_tuning.py params.yaml
    deps:
    - path: data/processed
      hash: md5
      md5: 79120a2f7d49c433074ebe54418aef7d.dir
      size: 994697
      nfiles: 4
    - path: src/hyperparameter_tuning.py
      hash: md5
      md5: cb40700987dee0726d8d008366f704b4
      size: 1962
    params:
      params.yaml:
        tune:
          n_iter: 5
          cv: 5
          param_grid:
            n_estimators:
            - 50
            - 100
            max_depth:
            - 5
            - 10
            - 15
            min_samples_leaf:
            - 3
            - 5
            min_samples_split:
            - 8
            - 15
    outs:
    - path: best_params.json
      hash: md5
      md5: 9353296cfc2209cde18d4729f5ff0342
      size: 107
  train:
    cmd: python src/model_trainer.py params.yaml
    deps:
    - path: data/processed
      hash: md5
      md5: 41616036666694c6fe956d58c2200ec9.dir
      size: 1188516
      nfiles: 4
    - path: src/model_trainer.py
      hash: md5
      md5: 612a1bebb3fb6ccf90c0737b165d743d
      size: 2097
    params:
      params.yaml:
        train:
          n_estimators: 100
          max_depth:
          min_samples_leaf: 2
          min_samples_split: 5
    outs:
    - path: models/model_columns.json
      hash: md5
      md5: 02622decba23c90cbd5df082f879a5e9
      size: 911
    - path: models/random_forest_model.pkl
      hash: md5
      md5: 44e0c8e9c3365c2f8c60d5aa81072a79
      size: 10296329
  evaluate:
    cmd: python src/model_evaluation.py params.yaml
    deps:
    - path: data/processed
      hash: md5
      md5: 41616036666694c6fe956d58c2200ec9.dir
      size: 1188516
      nfiles: 4
    - path: models/random_forest_model.pkl
      hash: md5
      md5: 44e0c8e9c3365c2f8c60d5aa81072a79
      size: 10296329
    - path: src/model_evaluation.py
      hash: md5
      md5: 10c8abf7f02b9d29df856b439cdf4b9c
      size: 3489
    params:
      params.yaml:
        preprocess:
          test_size: 0.2
          random_state: 42
        train:
          n_estimators: 100
          max_depth:
          min_samples_leaf: 2
          min_samples_split: 5
    outs:
    - path: metrics.json
      hash: md5
      md5: 6061482b865fb89f0ee53266b007dcec
      size: 150
